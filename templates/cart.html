{% extends "layout.html" %}
{% block content %}
<section class="min-h-screen bg-gradient-to-b from-gray-900 to-gray-950 text-white py-10 px-4">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-4xl font-bold text-pink-400 mb-10 flex items-center gap-3">
      üõí <span>Your Cart</span>
    </h2>

    {% if items %}
    <div class="overflow-x-auto">
      <table class="w-full text-left border-separate border-spacing-y-4">
        <thead>
          <tr class="text-sm text-purple-300 uppercase tracking-widest">
            <th>Product</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Subtotal</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr class="bg-gray-800 rounded-xl overflow-hidden shadow-md">
            <td class="py-4 px-3 flex items-center gap-4">
              <img src="{{ item.image_url or url_for('static', filename='images/placeholder.png') }}"
                   class="w-14 h-14 object-cover rounded-md border-2 border-pink-500" alt="{{ item.name }}">
              <span class="font-semibold text-lg text-white drop-shadow-sm">{{ item.name }}</span>
            </td>
            <td class="px-3">
              <form method="POST" action="{{ url_for('update_quantity') }}">
                <input type="hidden" name="cart_id" value="{{ item.cart_id }}">
                <select name="quantity"
                        class="bg-gray-700 text-white rounded px-2 py-1 border border-gray-500 hover:border-pink-500 focus:outline-none"
                        onchange="this.form.submit()">
                  {% for i in range(1, 11) %}
                  <option value="{{ i }}" {% if item.quantity == i %}selected{% endif %}>{{ i }}</option>
                  {% endfor %}
                </select>
              </form>
            </td>
            <td class="px-3 text-green-300 font-semibold">‚Çπ{{ item.price }}</td>
            <td class="px-3 text-blue-300 font-semibold">‚Çπ{{ item.price * item.quantity }}</td>
            <td class="px-3">
              <a href="{{ url_for('remove_from_cart', cart_id=item.cart_id) }}"
                 class="text-red-400 hover:text-red-600 font-bold transition duration-200 ease-in-out">
                ‚ùå Remove
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="mt-10 flex justify-between items-center">
      <p class="text-xl font-bold text-yellow-400">Total: ‚Çπ{{ total_price }}</p>
      <a href="{{ url_for('checkout') }}"
         class="bg-yellow-400 text-black px-6 py-3 rounded-lg font-semibold shadow hover:bg-yellow-300 transition duration-300">
        üöÄ Proceed to Checkout
      </a>
    </div>

    {% else %}
    <div class="text-center text-xl text-gray-400 mt-16">
      Your cart is empty üõçÔ∏è
    </div>
    {% endif %}
  </div>
</section>
{% endblock %}
